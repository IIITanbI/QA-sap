<?xml version="1.0" encoding="utf-8" ?>
<Project name="TutorialTests" description="Tests for Tutorial page">

  <!--First driver - Chrome-->
  <!--Second driver - FF (or otherwise)-->

  <SetUpSteps>
    <!--Prepare tutorial repository-->
    <TestStep description="Generate tutorial to local folder"></TestStep>
    <TestStep description="Clone Git repository"></TestStep>
    <TestStep description="Copy tutorial from local folder to local git repository"></TestStep>
    <TestStep description="Update remote Git repository"></TestStep>

    <!--Prepare Aem TutorialCatalog page-->
    <TestStep description="Create Tutorial page on Author"></TestStep>
    <TestStep description="Open created tutorial page on Author"></TestStep>
    <TestStep description="Login to Aem"></TestStep>
    <TestStep description="Setup TutorialCatalog component"></TestStep>
    <TestStep description="Add Container finder component to Tutorial Catalog page"></TestStep>
    <TestStep description="Setup ContainerFinder component"></TestStep>
    <TestStep description="Add Finder results component to Tutorial Catalog page"></TestStep>
    <TestStep description="Setup FinderResults component"></TestStep>
    <TestStep description="Add Facets component to Tutorial Catalog page"></TestStep>
    <TestStep description="Setup Facets component"></TestStep>
    <TestStep description="Activate created Tutorial catalog page"></TestStep>
    <TestStep description="Wait until created Tutorial catalog page being activated"></TestStep>

    <!--Run GitHub job-->
    <TestStep description="Find date of last issue"></TestStep>
    <TestStep description="Wait for GitHub job doesn't have progress"></TestStep>
    <TestStep description="Run GitHub job for tutorial export"></TestStep>
    
    <TestStep description="Veirfy that all children Tutorial page are Activated"></TestStep>
    <TestStep description="Wait for all children Tutorial page are Activated"></TestStep>
    <TestStep description="Get NEW issues for tutorial"></TestStep>
    
    <!--Collect tutorial cards data from TutorialCatalog page-->
    <TestStep description="Open created tutorial page on Author"></TestStep>
    <TestStep description="Refresh opened page to load tutorial cards"></TestStep>
    <!--Get Title, Description, Tags-->
    <TestStep description="Get GitHub tutorial cards from TutorialCatalogPage on Author"></TestStep>
    <TestStep description="Open created tutorial page on Publish"></TestStep>
    <TestStep description="Refresh opened page to get tutorial cards"></TestStep>
    <!--Get Title, Description, Tags-->
    <TestStep description="Get GitHub tutorial cards from TutorialCatalogPage on Publish"></TestStep>

    <!--Match gotten data with tutorial md files (using file name)-->
    <TestStep description="Assotiate issues got from GitHub"></TestStep>
    <TestStep description="Assotiate cards got from tutroial page on Author"></TestStep>
    <TestStep description="Assotiate cards got from tutroial page on Publish"></TestStep>
  </SetUpSteps>

  <VerifyCardSteps>
    <TestStep description="Open tutorial card page on Author"></TestStep>
    <!--Get Title, Description, Tags and Content-->
    <TestStep description="Get card data from page on Author"></TestStep>
    <TestStep description="Verify card page"></TestStep>
  </VerifyCardSteps>
  
  <TestSuite>
    <!-- Verify issue count ( and possible content (not implemented))-->
    <TestCase description="Verify tutorial issues"> </TestCase>
    <!-- Verify card data gotten from tutorial catalog page-->
    <TestCase description="Verify tutorial cards on Author  (FF or Chrome)"></TestCase>
    <!-- Verify card data gotten from tutorial catalog page-->
    <TestCase description="Verify tutorial cards on Publish  (FF or Chrome)"></TestCase>

    <!-- Verify card data gotten from card page using different browsers and environments-->
    <TestSuite description="Verify card using driver used for PageSetup (FF or Chrome)">
      <Tests>
        <TestCase description="Verify tutorial card page data on Author"></TestCase>
        <TestCase description="Verify tutorial card page data on Publish"></TestCase>
      </Tests>
    </TestSuite>
    <TestSuite description="Verify card using driver NOT used for PageSetup (FF or Chrome)">
      <Tests>
        <TestCase description="Verify tutorial card page data on Author"></TestCase>
        <TestCase description="Verify tutorial card page data on Publish"></TestCase>
      </Tests>
    </TestSuite>
    <TestCase description="Verify tutorial card page data on Publish in IE9"></TestCase>
    <TestCase description="Verify tutorial card page data on Publish in IE10"></TestCase>
    <TestCase description="Verify tutorial card page data on Publish in IE11"></TestCase>
  </TestSuite>
  
  <GitHubTutorialTests for="Create mode">
    <GitHubTutorialTest name="CreateTutorial" description="Create tutorial. SAP1DX-921:Create/update a new tutorial">
      <UniqueName>TutorialTest</UniqueName>
      <TutorialFile>
        <Folder>Tutorial921</Folder>
        <Name>Tutorial921</Name>

        <Title>Tutorial921 Title</Title>
        <Description>Tutorial921 Description</Description>
        <Content>Tutorial921 content</Content>

        <Tags>
          <tag>
            <tag>tutorial:technology/github</tag>
          </tag>
          <tag>
            <tag>tutorial:technology/java</tag>
          </tag>
          <tag>
            <tag>tutorial:product/mobile</tag>
          </tag>
        </Tags>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial921 Title</Title>
        <Description>Tutorial921 Description</Description>
        <Tags>
          <tag>GitHub</tag>
          <tag>Java</tag>
          <tag>Mobile</tag>
        </Tags>
        <Content>Tutorial921 content</Content>
      </ExpectedCard>

    </GitHubTutorialTest>
    <GitHubTutorialTest name="CreateTutorialWithEmptyTitle" description="Create tutorial with empty title. SAP1DX-941:Create/update a new tutorial without title">
      <UniqueName>TutorialTest</UniqueName>

      <TutorialFile>
        <Folder>Tutorial941</Folder>
        <Name>Tutorial941</Name>

        <Title></Title>
        <Description>Tutorial941 Description</Description>
        <Content>Tutorial941 content</Content>

        <Tags>
          <tag>
            <tag>tutorial:technology/github</tag>
          </tag>
          <tag>
            <tag>tutorial:technology/java</tag>
          </tag>
          <tag>
            <tag>tutorial:product/mobile</tag>
          </tag>
        </Tags>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial941</Title>
        <Description>Tutorial941 Description</Description>
        <Content>Tutorial941 content</Content>
        <Tags>
          <tag>GitHub</tag>
          <tag>Java</tag>
          <tag>Mobile</tag>
        </Tags>
      </ExpectedCard>

      <ExpectedIssue>
        <Title>Issue about empty Title</Title>
        <Content>Issue about empty Title</Content>
      </ExpectedIssue>

    </GitHubTutorialTest>
    <GitHubTutorialTest name="CreateTutorialWithEmptyDescription" description="Create tutorial with empty description. SAP1DX-942:Create/update a new tutorial without description">
      <UniqueName>TutorialTest</UniqueName>

      <TutorialFile>
        <Folder>Tutorial942</Folder>
        <Name>Tutorial942</Name>

        <Title>Tutorial942 Title</Title>
        <Description></Description>
        <Content>Tutorial942 content</Content>

        <Tags>
          <tag>
            <tag>tutorial:technology/github</tag>
          </tag>
          <tag>
            <tag>tutorial:technology/java</tag>
          </tag>
          <tag>
            <tag>tutorial:product/mobile</tag>
          </tag>
        </Tags>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial942 Title</Title>
        <Description>Tutorial Page, contents hosted on GitHub</Description>
        <Content>Tutorial942 content</Content>
        <Tags>
          <tag>GitHub</tag>
          <tag>Java</tag>
          <tag>Mobile</tag>
        </Tags>
      </ExpectedCard>

      <ExpectedIssue>
        <Title>Issue about empty Description</Title>
        <Content>Issue about empty Description</Content>
      </ExpectedIssue>

    </GitHubTutorialTest>
    <GitHubTutorialTest name="CreateTutorialWithEmptyTags" description="Create tutorial with empty Tags. SAP1DX-944:Create a new tutorial without tags">
      <UniqueName>TutorialTest</UniqueName>
      <TutorialFile>
        <Folder>Tutorial944</Folder>
        <Name>Tutorial944</Name>

        <Title>Tutorial944 Title</Title>
        <Description>Tutorial944 Description</Description>
        <Content>Tutorial944 content</Content>

        <Tags></Tags>

      </TutorialFile>

      <ExpectedIssue>
        <Title>Issue about empty Tags</Title>
        <Content>Issue about empty Tags</Content>
      </ExpectedIssue>

    </GitHubTutorialTest>
    <GitHubTutorialTest name="CreateTutorialWithAemTags" description="Create tutorial with Aem Tags. SAP1DX-1010:Create/update a new tutorial with mapping tags in AEM">
      <UniqueName>TutorialTest</UniqueName>
      <TutorialFile>
        <Folder>Tutorial1010</Folder>
        <Name>Tutorial1010</Name>

        <Title>Tutorial1010 Title</Title>
        <Description>Tutorial1010 Description</Description>
        <Content>Tutorial1010 content</Content>

        <Tags>
          <tag>
            <tag>tutorial:technology/github</tag>
          </tag>
          <tag>
            <tag>language:hebrew</tag>
          </tag>
          <tag>
            <tag>workflow:projects/wcm/landingpage</tag>
          </tag>
        </Tags>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial1010 Title</Title>
        <Description>Tutorial1010 Description</Description>
        <Content>Tutorial1010 content</Content>
        <Tags>
          <tag>GitHub</tag>
          <tag>Hebrew</tag>
          <tag>Landing Page</tag>
        </Tags>
      </ExpectedCard>

    </GitHubTutorialTest>
    <GitHubTutorialTest name="CreateTutorialForUpdatingWihtoutValidTags" description="Create tutorial with valid Tags (for future updating without valid tags). SAP1DX-1205:Update tutorial to tutorial without valid tags">
      <UniqueName>TutorialTest</UniqueName>
      <TutorialFile>
        <Folder>Tutorial1205</Folder>
        <Name>Tutorial1205</Name>

        <Title>Tutorial1205 Title</Title>
        <Description>Tutorial1205 Description</Description>
        <Content>Tutorial1205 content</Content>

        <Tags>
          <tag>
            <tag>tutorial:technology/github</tag>
          </tag>
        </Tags>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial1205 Title</Title>
        <Description>Tutorial1205 Description</Description>
        <Content>Tutorial1205 content</Content>
        <Tags>
          <tag>GitHub</tag>
        </Tags>
      </ExpectedCard>

    </GitHubTutorialTest>
    <GitHubTutorialTest name="CreateTutorialForUpdatingWithH1" description="Create tutorial for updating with H1. SAP1DX-1206:Update tutorial to tutorial with H1 tag">
      <UniqueName>TutorialTest</UniqueName>
      <TutorialFile>
        <Folder>Tutorial1206</Folder>
        <Name>Tutorial1206</Name>

        <Title>Tutorial1206 Title</Title>
        <Description>Tutorial1206 Description</Description>
        <Content>Tutorial1206 content</Content>

        <Tags>
          <tag>
            <tag>tutorial:technology/github</tag>
          </tag>
          <tag>
            <tag>tutorial:technology/java</tag>
          </tag>
          <tag>
            <tag>tutorial:product/mobile</tag>
          </tag>
        </Tags>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial1206 Title</Title>
        <Description>Tutorial1206 Description</Description>
        <Content>Tutorial1206 content</Content>
        <Tags>
          <tag>GitHub</tag>
          <tag>Java</tag>
          <tag>Mobile</tag>
        </Tags>
      </ExpectedCard>

    </GitHubTutorialTest>
    <GitHubTutorialTest name="CreateTutorialForUpdatingWithoutMetatags" description="Create tutorial for updating without Metatags. SAP1DX-1209:Update tutorial to tutorial without meta tags">
      <UniqueName>TutorialTest</UniqueName>
      <TutorialFile>
        <Folder>Tutorial1209</Folder>
        <Name>Tutorial1209</Name>

        <Title>Tutorial1209 Title</Title>
        <Description>Tutorial1209 Description</Description>
        <Content>Tutorial1209 content</Content>

        <Tags>
          <tag>
            <tag>tutorial:technology/github</tag>
          </tag>
          <tag>
            <tag>tutorial:technology/java</tag>
          </tag>
          <tag>
            <tag>tutorial:product/mobile</tag>
          </tag>
        </Tags>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial1209 Title</Title>
        <Description>Tutorial1209 Description</Description>
        <Content>Tutorial1209 content</Content>
        <Tags>
          <tag>GitHub</tag>
          <tag>Java</tag>
          <tag>Mobile</tag>
        </Tags>
      </ExpectedCard>

    </GitHubTutorialTest>
  </GitHubTutorialTests>

  <GitHubTutorialTests for="Update mode">
    <GitHubTutorialTest name="UpdateTutorial" description="Update tutorial. SAP1DX-921:Create/update a new tutorial">
      <UniqueName>TutorialTest</UniqueName>

      <TutorialFile>
        <Folder>Tutorial921</Folder>
        <Name>Tutorial921</Name>

        <Title>Tutorial921 updated Title</Title>
        <Description>Tutorial921 updated Description</Description>
        <Content>Tutorial921 updated content</Content>

        <Tags>
          <tag>
            <tag>tutorial:technology/github</tag>
          </tag>
          <tag>
            <tag>tutorial:technology/java</tag>
          </tag>
          <tag>
            <tag>tutorial:interest/security</tag>
          </tag>
        </Tags>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial921 updated Title</Title>
        <Description>Tutorial921 updated Description</Description>
        <Content>Tutorial921 updated content</Content>
        <Tags>
          <tag>GitHub</tag>
          <tag>Java</tag>
          <tag>Security</tag>
        </Tags>
      </ExpectedCard>

    </GitHubTutorialTest>
    <GitHubTutorialTest name="UpdateTutorialWithEmptyTitle" description="Update tutorial with empty title. SAP1DX-941:Create/update a new tutorial without title">
      <UniqueName>TutorialTest</UniqueName>

      <TutorialFile>
        <Folder>Tutorial941</Folder>
        <Name>Tutorial941</Name>

        <Title></Title>
        <Description>Tutorial941 updated Description</Description>
        <Content>Tutorial941 updated content</Content>

        <Tags>
          <tag>
            <tag>tutorial:technology/github</tag>
          </tag>
          <tag>
            <tag>tutorial:technology/java</tag>
          </tag>
          <tag>
            <tag>tutorial:interest/security</tag>
          </tag>
        </Tags>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial941</Title>
        <Description>Tutorial941 updated Description</Description>
        <Content>Tutorial941 updated content</Content>
        <Tags>
          <tag>GitHub</tag>
          <tag>Java</tag>
          <tag>Security</tag>
        </Tags>
      </ExpectedCard>

      <ExpectedIssue>
        <Title>Issue about empty Title</Title>
        <Content>Issue about empty Title</Content>
      </ExpectedIssue>

    </GitHubTutorialTest>
    <GitHubTutorialTest name="UpdateTutorialWithEmptyDescription" description="Update tutorial with empty description. SAP1DX-942:Create/update a new tutorial without description">
      <UniqueName>TutorialTest</UniqueName>

      <TutorialFile>
        <Folder>Tutorial942</Folder>
        <Name>Tutorial942</Name>

        <Title>Tutorial942 updated Title</Title>
        <Description></Description>
        <Content>Tutorial942 updated content</Content>

        <Tags>
          <tag>
            <tag>tutorial:technology/github</tag>
          </tag>
          <tag>
            <tag>tutorial:technology/java</tag>
          </tag>
          <tag>
            <tag>tutorial:product/mobile</tag>
          </tag>
        </Tags>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial942 updated Title</Title>
        <Description>Tutorial Page, contents hosted on GitHub</Description>
        <Content>Tutorial942 updated content</Content>
        <Tags>
          <tag>GitHub</tag>
          <tag>Java</tag>
          <tag>Mobile</tag>
        </Tags>
      </ExpectedCard>

      <ExpectedIssue>
        <Title>Issue about empty Description</Title>
        <Content>Issue about empty Description</Content>
      </ExpectedIssue>

    </GitHubTutorialTest>
    <GitHubTutorialTest name="UpdateTutorialWithAemTags" description="Update tutorial with Aem Tags. SAP1DX-1010:Create/update a new tutorial with mapping tags in AEM">
      <UniqueName>TutorialTest</UniqueName>
      <TutorialFile>
        <Folder>Tutorial1010</Folder>
        <Name>Tutorial1010</Name>

        <Title>Tutorial1010 updated Title</Title>
        <Description>Tutorial1010 updated Description</Description>
        <Content>Tutorial1010 updated content</Content>

        <Tags>
          <tag>
            <tag>tutorial:technology/github</tag>
          </tag>
          <tag>
            <tag>forum:topic/hot</tag>
          </tag>
          <tag>
            <tag>workflow:projects/wcm/landingpage</tag>
          </tag>
        </Tags>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial1010 updated Title</Title>
        <Description>Tutorial1010 updated Description</Description>
        <Content>Tutorial1010 updated content</Content>
        <Tags>
          <tag>GitHub</tag>
          <tag>Hot</tag>
          <tag>Landing Page</tag>
        </Tags>
      </ExpectedCard>

    </GitHubTutorialTest>
    <GitHubTutorialTest name="UpdateTutorialWithoutValidTags" description="Update tutorial with valid Tags (for future updating). SAP1DX-1205:Update tutorial to tutorial without valid tags">
      <UniqueName>TutorialTest</UniqueName>
      <TutorialFile>
        <Folder>Tutorial1205</Folder>
        <Name>Tutorial1205</Name>

        <Title>Tutorial1205 updated Title</Title>
        <Description>Tutorial1205 updated Description</Description>
        <Content>Tutorial1205 updated content</Content>

        <Tags>
          <tag>
            <tag>invalidTag1</tag>
            <tag>invalidTag2</tag>
          </tag>
        </Tags>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial1205 Title</Title>
        <Description>Tutorial1205 Description</Description>
        <Content>Tutorial1205 content</Content>
        <Tags>
          <tag>GitHub</tag>
        </Tags>
      </ExpectedCard>

      <ExpectedIssue>
        <Title>Issue about missing Tags</Title>
        <Content>Issue about missing Tags</Content>
      </ExpectedIssue>

    </GitHubTutorialTest>
    <GitHubTutorialTest name="UpdateTutorialWithH1" description="Update tutorial with H1. SAP1DX-1206:Update tutorial to tutorial with H1 tag">
      <UniqueName>TutorialTest</UniqueName>
      <TutorialFile>
        <Folder>Tutorial1206</Folder>
        <Name>Tutorial1206</Name>

        <Title>Tutorial1206 updated Title</Title>
        <Description>Tutorial1206 updated Description</Description>
        <Content>
          <![CDATA[# H1 tag
Tutorial1206 updated content]]>
        </Content>

        <Tags>
          <tag>
            <tag>tutorial:technology/github</tag>
          </tag>
          <tag>
            <tag>tutorial:technology/java</tag>
          </tag>
          <tag>
            <tag>tutorial:product/mobile</tag>
          </tag>
        </Tags>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial1206 Title</Title>
        <Description>Tutorial1206 Description</Description>
        <Content>Tutorial1206 content</Content>
        <Tags>
          <tag>GitHub</tag>
          <tag>Java</tag>
          <tag>Mobile</tag>
        </Tags>
      </ExpectedCard>

      <ExpectedIssue>
        <Title>Issue about H1 tag</Title>
        <Content>Issue about H1 tag</Content>
      </ExpectedIssue>

    </GitHubTutorialTest>
    <GitHubTutorialTest name="UpdateTutorialWithoutMetatags" description="Update tutorial without Metatags. SAP1DX-1209:Update tutorial to tutorial without meta tags">
      <UniqueName>TutorialTest</UniqueName>

      <TutorialFile>
        <Folder>Tutorial1209</Folder>
        <Name>Tutorial1209</Name>

        <Content>Tutorial1209 content</Content>

      </TutorialFile>

      <ExpectedCard>
        <Title>Tutorial1209 Title</Title>
        <Description>Tutorial1209 Description</Description>
        <Content>Tutorial1209 content</Content>
        <Tags>
          <tag>GitHub</tag>
          <tag>Java</tag>
          <tag>Mobile</tag>
        </Tags>
      </ExpectedCard>

      <ExpectedIssue>
        <Title>Issue about missing Tags</Title>
        <Content>Issue about missing Tags</Content>
      </ExpectedIssue>

    </GitHubTutorialTest>
  </GitHubTutorialTests>
</Project>